{"ast":null,"code":"import { Validators } from '@angular/forms';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/forms\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"../service/utente.service\";\nimport * as i4 from \"@angular/common\";\nfunction CaLoginComponent_span_10_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 16);\n    i0.ɵɵtext(1, \"Email e/o Password sbagliati\");\n    i0.ɵɵelementEnd();\n  }\n}\nexport class CaLoginComponent {\n  constructor(fb, router, utenteService) {\n    this.fb = fb;\n    this.router = router;\n    this.utenteService = utenteService;\n    this.dati = this.fb.group({\n      email: ['', [Validators.required]],\n      password: ['', [Validators.required]]\n    });\n    this.errore = false;\n    this.idUtente = this.utenteService.getId();\n    if (this.idUtente != null && this.idUtente != 0) {\n      this.router.navigate(['/home']);\n    }\n  }\n  invio() {\n    this.utenteService.login(this.dati.get(\"email\")?.value, this.dati.get(\"password\")?.value).subscribe(response => {\n      this.utenteService.setId(response.idUtente);\n      this.utenteService.setLoggato();\n      this.utenteService.setNome(response.name);\n      this.utenteService.isUserLoggedIn.next(true);\n      this.router.navigate(['/home']);\n      this.errore = false;\n    }, error => {\n      this.errore = true;\n      this.utenteService.isUserLoggedIn.next(false);\n    });\n    //sessionStorage.setItem(\"login\", \"true\");\n    //this.router.navigate(['/home'])\n  }\n  static #_ = this.ɵfac = function CaLoginComponent_Factory(t) {\n    return new (t || CaLoginComponent)(i0.ɵɵdirectiveInject(i1.FormBuilder), i0.ɵɵdirectiveInject(i2.Router), i0.ɵɵdirectiveInject(i3.UtenteService));\n  };\n  static #_2 = this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: CaLoginComponent,\n    selectors: [[\"app-ca-login\"]],\n    decls: 22,\n    vars: 3,\n    consts: [[1, \"gradient-custom\", \"min-vh-100\"], [1, \"container\", \"py-5\", \"h-100\"], [1, \"row\", \"d-flex\", \"justify-content-center\", \"align-items-center\", \"h-100\"], [1, \"col-12\", \"col-md-8\", \"col-lg-6\", \"col-xl-5\"], [1, \"card\", \"bg-dark\", 2, \"border-radius\", \"1rem\"], [1, \"card-body\", \"p-5\", \"text-center\"], [1, \"mb-md-5\", \"mt-md-4\", \"pb-5\"], [\"id\", \"profile-img\", \"src\", \"https://s2.coinmarketcap.com/static/img/coins/200x200/4030.png\", 1, \"rounded-circle\", \"profile-img-card\"], [1, \"text-white-50\", \"mb-5\"], [\"class\", \"badge badge-danger \", \"style\", \"background-color: red;\", 4, \"ngIf\"], [3, \"formGroup\", \"ngSubmit\"], [1, \"form-floating\", \"mb-3\"], [\"type\", \"email\", \"id\", \"floatingEmail\", \"placeholder\", \"Email\", \"formControlName\", \"email\", 1, \"form-control\"], [\"for\", \"floatingPassword\"], [\"type\", \"password\", \"id\", \"floatingPassword\", \"placeholder\", \"Password\", \"formControlName\", \"password\", 1, \"form-control\"], [\"type\", \"submit\", 1, \"btn\", \"btn-outline-light\", \"btn-lg\", \"px-5\", 3, \"disabled\"], [1, \"badge\", \"badge-danger\", 2, \"background-color\", \"red\"]],\n    template: function CaLoginComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"section\", 0)(1, \"div\", 1)(2, \"div\", 2)(3, \"div\", 3)(4, \"div\", 4)(5, \"div\", 5)(6, \"div\", 6);\n        i0.ɵɵelement(7, \"img\", 7);\n        i0.ɵɵelementStart(8, \"p\", 8);\n        i0.ɵɵtext(9, \"Please enter your email and password!\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(10, CaLoginComponent_span_10_Template, 2, 0, \"span\", 9);\n        i0.ɵɵelementStart(11, \"form\", 10);\n        i0.ɵɵlistener(\"ngSubmit\", function CaLoginComponent_Template_form_ngSubmit_11_listener() {\n          return ctx.invio();\n        });\n        i0.ɵɵelementStart(12, \"div\", 11);\n        i0.ɵɵelement(13, \"input\", 12);\n        i0.ɵɵelementStart(14, \"label\", 13);\n        i0.ɵɵtext(15, \"Email\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(16, \"div\", 11);\n        i0.ɵɵelement(17, \"input\", 14);\n        i0.ɵɵelementStart(18, \"label\", 13);\n        i0.ɵɵtext(19, \"Password\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(20, \"button\", 15);\n        i0.ɵɵtext(21, \"Login\");\n        i0.ɵɵelementEnd()()()()()()()()();\n      }\n      if (rf & 2) {\n        i0.ɵɵadvance(10);\n        i0.ɵɵproperty(\"ngIf\", ctx.errore);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"formGroup\", ctx.dati);\n        i0.ɵɵadvance(9);\n        i0.ɵɵproperty(\"disabled\", ctx.dati.invalid);\n      }\n    },\n    dependencies: [i4.NgIf, i1.ɵNgNoValidate, i1.DefaultValueAccessor, i1.NgControlStatus, i1.NgControlStatusGroup, i1.FormGroupDirective, i1.FormControlName],\n    styles: [\".gradient-custom[_ngcontent-%COMP%] {\\r\\n    \\r\\n    background: #6a11cb;\\r\\n    \\r\\n    \\r\\n    \\r\\n    \\r\\n    background: linear-gradient(to right, rgba(106, 17, 203, 1), rgba(37, 117, 252, 1))\\r\\n}\\r\\n\\r\\n#profile-img[_ngcontent-%COMP%] {\\r\\n    height:180px;\\r\\n\\r\\n}\\n/*# sourceURL=webpack://./src/app/ca-login/ca-login.component.css */\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvY2EtbG9naW4vY2EtbG9naW4uY29tcG9uZW50LmNzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtJQUNJLDhCQUE4QjtJQUM5QixtQkFBbUI7O0lBRW5CLCtCQUErQjs7SUFHL0IscUVBQXFFO0lBQ3JFO0FBQ0o7O0FBRUE7SUFDSSxZQUFZOztBQUVoQiIsInNvdXJjZXNDb250ZW50IjpbIi5ncmFkaWVudC1jdXN0b20ge1xyXG4gICAgLyogZmFsbGJhY2sgZm9yIG9sZCBicm93c2VycyAqL1xyXG4gICAgYmFja2dyb3VuZDogIzZhMTFjYjtcclxuICAgIFxyXG4gICAgLyogQ2hyb21lIDEwLTI1LCBTYWZhcmkgNS4xLTYgKi9cclxuICAgIGJhY2tncm91bmQ6IC13ZWJraXQtbGluZWFyLWdyYWRpZW50KHRvIHJpZ2h0LCByZ2JhKDEwNiwgMTcsIDIwMywgMSksIHJnYmEoMzcsIDExNywgMjUyLCAxKSk7XHJcbiAgICBcclxuICAgIC8qIFczQywgSUUgMTArLyBFZGdlLCBGaXJlZm94IDE2KywgQ2hyb21lIDI2KywgT3BlcmEgMTIrLCBTYWZhcmkgNysgKi9cclxuICAgIGJhY2tncm91bmQ6IGxpbmVhci1ncmFkaWVudCh0byByaWdodCwgcmdiYSgxMDYsIDE3LCAyMDMsIDEpLCByZ2JhKDM3LCAxMTcsIDI1MiwgMSkpXHJcbn1cclxuXHJcbiNwcm9maWxlLWltZyB7XHJcbiAgICBoZWlnaHQ6MTgwcHg7XHJcblxyXG59Il0sInNvdXJjZVJvb3QiOiIifQ== */\"]\n  });\n}","map":{"version":3,"mappings":"AACA,SAAiCA,UAAU,QAAQ,gBAAgB;;;;;;;;ICUrDC,gCAAqF;IAAAA,4CAA4B;IAAAA,iBAAO;;;ADDtI,OAAM,MAAOC,gBAAgB;EAO3BC,YAAoBC,EAAe,EAAUC,MAAc,EAASC,aAA2B;IAA3E,OAAE,GAAFF,EAAE;IAAuB,WAAM,GAANC,MAAM;IAAiB,kBAAa,GAAbC,aAAa;IAE/E,IAAI,CAACC,IAAI,GAAG,IAAI,CAACH,EAAE,CAACI,KAAK,CAAC;MACxBC,KAAK,EAAE,CAAC,EAAE,EAAE,CAACT,UAAU,CAACU,QAAQ,CAAC,CAAC;MAClCC,QAAQ,EAAE,CAAC,EAAE,EAAE,CAACX,UAAU,CAACU,QAAQ,CAAC;KACrC,CAAC;IAEF,IAAI,CAACE,MAAM,GAAG,KAAK;IACnB,IAAI,CAACC,QAAQ,GAAG,IAAI,CAACP,aAAa,CAACQ,KAAK,EAAE;IAC1C,IAAG,IAAI,CAACD,QAAQ,IAAE,IAAI,IAAI,IAAI,CAACA,QAAQ,IAAE,CAAC,EAAC;MACzC,IAAI,CAACR,MAAM,CAACU,QAAQ,CAAC,CAAC,OAAO,CAAC,CAAC;;EAEnC;EAGAC,KAAK;IAEH,IAAI,CAACV,aAAa,CAACW,KAAK,CAAC,IAAI,CAACV,IAAI,CAACW,GAAG,CAAC,OAAO,CAAC,EAAEC,KAAK,EAAE,IAAI,CAACZ,IAAI,CAACW,GAAG,CAAC,UAAU,CAAC,EAAEC,KAAK,CAAC,CAACC,SAAS,CAChGC,QAAa,IAAI;MAChB,IAAI,CAACf,aAAa,CAACgB,KAAK,CAACD,QAAQ,CAACR,QAAQ,CAAC;MAC3C,IAAI,CAACP,aAAa,CAACiB,UAAU,EAAE;MAC/B,IAAI,CAACjB,aAAa,CAACkB,OAAO,CAACH,QAAQ,CAACI,IAAI,CAAC;MACzC,IAAI,CAACnB,aAAa,CAACoB,cAAc,CAACC,IAAI,CAAC,IAAI,CAAC;MAC5C,IAAI,CAACtB,MAAM,CAACU,QAAQ,CAAC,CAAC,OAAO,CAAC,CAAC;MAC/B,IAAI,CAACH,MAAM,GAAG,KAAK;IAErB,CAAC,EACAgB,KAAU,IAAI;MACb,IAAI,CAAChB,MAAM,GAAG,IAAI;MAClB,IAAI,CAACN,aAAa,CAACoB,cAAc,CAACC,IAAI,CAAC,KAAK,CAAC;IAC/C,CAAC,CACF;IACD;IACA;EACF;EAAC;qBAzCUzB,gBAAgB;EAAA;EAAA;UAAhBA,gBAAgB;IAAA2B;IAAAC;IAAAC;IAAAC;IAAAC;MAAA;QCV7BhC,kCAA6C;QAS/BA,yBAAqI;QACrIA,4BAA8B;QAAAA,qDAAqC;QAAAA,iBAAI;QACvEA,qEAAwH;QACxHA,iCAA8C;QAArBA;UAAA,OAAYiC,WAAO;QAAA,EAAC;QAC3CjC,gCAAgC;QAC5BA,6BAAyG;QACzGA,kCAA8B;QAAAA,sBAAK;QAAAA,iBAAQ;QAG/CA,gCAAgC;QAC5BA,6BAAqH;QACrHA,kCAA8B;QAAAA,yBAAQ;QAAAA,iBAAQ;QAKlDA,mCAA0F;QAAAA,sBAAK;QAAAA,iBAAS;;;QAdxCA,gBAAiB;QAAjBA,iCAAiB;QAC7EA,eAAkB;QAAlBA,oCAAkB;QAa0CA,eAAyB;QAAzBA,2CAAyB","names":["Validators","i0","CaLoginComponent","constructor","fb","router","utenteService","dati","group","email","required","password","errore","idUtente","getId","navigate","invio","login","get","value","subscribe","response","setId","setLoggato","setNome","name","isUserLoggedIn","next","error","selectors","decls","vars","consts","template","ctx"],"sourceRoot":"","sources":["C:\\Users\\daniele.beribe\\src\\algoDemo2VitaB\\algoDemo\\algoDemoFrontend\\src\\app\\ca-login\\ca-login.component.ts","C:\\Users\\daniele.beribe\\src\\algoDemo2VitaB\\algoDemo\\algoDemoFrontend\\src\\app\\ca-login\\ca-login.component.html"],"sourcesContent":["import { Component } from '@angular/core';\r\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\r\nimport { Router } from '@angular/router';\r\nimport { UtenteService } from '../service/utente.service';\r\n\r\n@Component({\r\n  selector: 'app-ca-login',\r\n  templateUrl: './ca-login.component.html',\r\n  styleUrls: ['./ca-login.component.css']\r\n})\r\nexport class CaLoginComponent {\r\n\r\n  dati: FormGroup;\r\n  idUtente:any\r\n  errore: boolean\r\n\r\n\r\n  constructor(private fb: FormBuilder, private router: Router,private utenteService:UtenteService) {\r\n\r\n    this.dati = this.fb.group({\r\n      email: ['', [Validators.required]],\r\n      password: ['', [Validators.required]]\r\n    })\r\n\r\n    this.errore = false;\r\n    this.idUtente = this.utenteService.getId();\r\n    if(this.idUtente!=null && this.idUtente!=0){\r\n      this.router.navigate(['/home']);\r\n    }\r\n  }\r\n\r\n\r\n  invio(): void {\r\n\r\n    this.utenteService.login(this.dati.get(\"email\")?.value, this.dati.get(\"password\")?.value).subscribe(\r\n      (response: any) => {\r\n        this.utenteService.setId(response.idUtente);\r\n        this.utenteService.setLoggato();\r\n        this.utenteService.setNome(response.name);\r\n        this.utenteService.isUserLoggedIn.next(true);\r\n        this.router.navigate(['/home']);\r\n        this.errore = false;\r\n\r\n      },\r\n      (error: any) => {\r\n        this.errore = true;\r\n        this.utenteService.isUserLoggedIn.next(false);\r\n      }\r\n    )\r\n    //sessionStorage.setItem(\"login\", \"true\");\r\n    //this.router.navigate(['/home'])\r\n  }\r\n}\r\n\r\n\r\n\r\n","<section class=\"gradient-custom min-vh-100\" >\r\n  <div class=\"container py-5 h-100\">\r\n    <div class=\"row d-flex justify-content-center align-items-center h-100\">\r\n      <div class=\"col-12 col-md-8 col-lg-6 col-xl-5\">\r\n        <div class=\"card bg-dark \" style=\"border-radius: 1rem;\">\r\n          <div class=\"card-body p-5 text-center\">\r\n\r\n            <div class=\"mb-md-5 mt-md-4 pb-5\">\r\n              \r\n              <img id=\"profile-img\" class=\"rounded-circle profile-img-card\" src=\"https://s2.coinmarketcap.com/static/img/coins/200x200/4030.png\" />\r\n              <p class=\"text-white-50 mb-5\">Please enter your email and password!</p>\r\n              <span class=\"badge badge-danger \" style=\"background-color: red;\" *ngIf=\"this.errore\">Email e/o Password sbagliati</span>\r\n              <form [formGroup]=\"dati\" (ngSubmit)=\"invio()\">\r\n                <div class=\"form-floating mb-3\">\r\n                    <input type=\"email\" class=\"form-control\" id=\"floatingEmail\" placeholder=\"Email\"  formControlName=\"email\">\r\n                    <label for=\"floatingPassword\">Email</label>\r\n                </div>\r\n\r\n                <div class=\"form-floating mb-3\">\r\n                    <input type=\"password\" class=\"form-control\" id=\"floatingPassword\" placeholder=\"Password\"  formControlName=\"password\">\r\n                    <label for=\"floatingPassword\">Password</label>\r\n                </div>\r\n\r\n\r\n\r\n                <button class=\"btn btn-outline-light btn-lg px-5\" type=\"submit\" [disabled]=\"dati.invalid\">Login</button>\r\n              </form>\r\n              \r\n\r\n            </div>\r\n\r\n\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</section>"]},"metadata":{},"sourceType":"module","externalDependencies":[]}